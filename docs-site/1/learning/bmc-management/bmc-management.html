<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BMC Management :: Caleb Carlson | Documentation</title>
    <link rel="canonical" href="https://inf0rmatiker.github.io/docs-site/1/learning/bmc-management/bmc-management.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://inf0rmatiker.github.io">Caleb Carlson | Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://inf0rmatiker.github.io/">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs-site" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">VU Meter</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../projects/vu-meter/vu-meter.html">VU Meter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PC Exhaust</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../projects/pc-exhaust/pc-exhaust.html">PC Exhaust</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Learning</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Kubernetes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../kubernetes/crds.html">CRDs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../kubernetes/k8s-api-resources.html">Kubernetes Resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../kubernetes/k8s-install.html">Kubernetes Install</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../kubernetes/kubectl.html">kubectl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lustre</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lustre/benchmarks.html">Benchmarks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lustre/compiling-lustre.html">Compiling Lustre</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lustre/development.html">Development</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lustre/lustre-client.html">Lustre Client</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lustre/lustre-server.html">Lustre Server</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lustre/lustre-networking.html">Lustre Networking</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Linux</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/installs/rocky-install.html">Rocky Linux Install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/installs/opensuse-install.html">OpenSUSE Linux Install</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../linux/isos.html">ISOs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../linux/rpms.html">RPMs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../linux/tmux.html">Tmux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../linux/user-management.html">User Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Networking</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/networking/linux-networking.html">Linux</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/networking/mpi.html">MPI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/networking/proxies.html">Proxies</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/networking/rdma.html">RDMA Programming</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/networking/socket_programming.html">Socket Programming</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/networking/ssh.html">SSH</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/storage/benchmarks.html">Benchmarks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/storage/filesystems.html">Filesystems</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../linux/storage/drives.html">Drives</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Docker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../docker/multiarch-building.html">Multi-Architecture Builds</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../docker/nginx-webserver.html">Nginx Webserver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../docker/registry-proxy.html">Registry Proxy</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Asciinema</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../asciinema/asciinema.html">Asciinema</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">BMC Management</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="bmc-management.html">BMC Management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Version Control</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../version-control/git/git.html">Git</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../version-control/github/github.html">GitHub</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../algorithms/algorithms.html">Algorithms</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Machine Learning</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../machine-learning/benchmarks.html">Benchmarks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../machine-learning/determinedai.html">Determined AI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rest-apis/api-security.html">Secure Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">InfiniBand</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../infiniband/infiniband.html">InfiniBand</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../infiniband/monitoring.html">Fabric Monitoring</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Languages</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">C</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/c/getopt.html">Getopt</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../languages/cpp/cpp.html">C++</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/arrays.html">Arrays</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/branch_control.html">Branch Control</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/classes.html">Classes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/compiling.html">Compiling and Executing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/development_environment.html">Development Environment</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/error_handling.html">Error Handling</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/functions.html">Functions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/input_streams.html">Input Streams</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/macros.html">Macros</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/pointers.html">Pointers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/references.html">References</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/structures.html">Stuctures</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/types.html">Types</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../languages/cpp/vectors.html">Vectors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../languages/go/go.html">Go</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Slurm</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../slurm/slurm.html">Slurm</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">GPUs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../gpus/gds.html">GPUDirect Storage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../gpus/numa.html">NUMA</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Switch Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../switch-management/switch-management.html">Switch Management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">HPCM</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../hpcm/hpcm.html">HPCM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Documentation</a></li>
    <li>Learning</li>
    <li>BMC Management</li>
    <li><a href="bmc-management.html">BMC Management</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">BMC Management</h1>
<div class="sect1">
<h2 id="_hpe_ilo"><a class="anchor" href="#_hpe_ilo"></a>HPE iLO</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_connect_to_ilo_gui_through_tunnel"><a class="anchor" href="#_connect_to_ilo_gui_through_tunnel"></a>Connect to iLO GUI through Tunnel</h3>
<div class="paragraph">
<p>Taken from:
<a href="https://support.hpe.com/hpesc/public/docDisplay?docId=sd00003394en_us&amp;page=GUID-23C22C3A-300F-48C7-996C-47EC35828CF5.html">Cray ClusterStor data services Installation Guide 2.2</a></p>
</div>
<div class="paragraph">
<p>Method 1: SOCKS Proxy</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SSH into intermediary node:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh -D 8090 root@INTERMEDIARY_NODE</code></pre>
</div>
</div>
</li>
<li>
<p>Configure the external system Firefox browser to use a SOCKS 5 proxy on <code>localhost</code> on port <code>8090</code>.
This can be found under <code>Settings &#8594; Network Settings</code>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/bmc-management/firefox_socks_proxy.png" alt="Firefox Network Settings">
</div>
</div>
</li>
<li>
<p>Navigate to the <code><a href="https://&lt;iLO_IP&gt" class="bare">https://&lt;iLO_IP&gt</a>;</code> in your Firefox browser.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Method 2: SSH Tunnel</p>
</div>
<div class="paragraph">
<p>Create an SSH tunnel to forward port 443 traffic to the BMC:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the tunnel using local SSH port forwarding. Replace <code>LOCAL_PORT</code> with an unused local port.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh -L LOCAL_PORT:BMC_IP:443 INTERMEDIARY_NODE</code></pre>
</div>
</div>
</li>
<li>
<p>Connect to the iLO web GUI interface of the BMC at <code><a href="https://localhost:LOCAL_PORT" class="bare">https://localhost:LOCAL_PORT</a></code>.</p>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">➜  ~ ssh -L 8089:172.24.254.53:443 cdslmo4</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here, we&#8217;re forwarding traffic on port <code>8089</code> of our local laptop to <code>172.24.254.53:443</code>,
using <code>cdslmo4</code> as our intermediary node.</p>
</div>
<div class="paragraph">
<p>Then, in a browser on your laptop, navigate to <code><a href="https://localhost:8089" class="bare">https://localhost:8089</a></code></p>
</div>
</div>
<div class="sect2">
<h3 id="_ilorest"><a class="anchor" href="#_ilorest"></a><code>ilorest</code></h3>
<div class="paragraph">
<p>ilorest user guide: <a href="https://servermanagementportal.ext.hpe.com/docs/redfishclients/ilorest-userguide/usage/" class="bare">https://servermanagementportal.ext.hpe.com/docs/redfishclients/ilorest-userguide/usage/</a></p>
</div>
<div class="paragraph">
<p>Login with ilorest:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">[root@cdslmo4-client01 ~]# ilorest login https://172.24.254.53 -u root -p &lt;password&gt;
iLOrest : RESTful Interface Tool version 4.0.0.0
Copyright (c) 2014-2022 Hewlett Packard Enterprise Development LP
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Discovering data...Done</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updating_firmware"><a class="anchor" href="#_updating_firmware"></a>Updating Firmware</h3>
<div class="paragraph">
<p>Firmware packages can be found in the HPE Support Center:
<a href="https://support.hpe.com/connect/s/softwaredetails?language=en_US&amp;collectionId=MTX-2dc80c4ae4b943fa&amp;tab=releaseNotes" class="bare">https://support.hpe.com/connect/s/softwaredetails?language=en_US&amp;collectionId=MTX-2dc80c4ae4b943fa&amp;tab=releaseNotes</a></p>
</div>
<div class="paragraph">
<p>Or in the LMO web server:
<a href="http://lmo-pxe.hpc.amslabs.hpecorp.net/firmware/ilo/5/" class="bare">http://lmo-pxe.hpc.amslabs.hpecorp.net/firmware/ilo/5/</a></p>
</div>
<div class="paragraph">
<p>Using <code>ilorest</code> from a host/server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ilorest flashfwpkg &lt;file_name.fwpkg&gt; --url &lt;iLO5_IP_Address&gt; -u &lt;iLO5_username&gt; -p &lt;iLO5_password&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">[root@cdslmo4-client01 ~]# ilorest flashfwpkg ilo5_310.fwpkg --url https://172.24.254.53 -u root -p &lt;password&gt;
iLOrest : RESTful Interface Tool version 4.0.0.0
Copyright (c) 2014-2022 Hewlett Packard Enterprise Development LP
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Discovering data...Done
Uploading firmware: ilo5_310.bin
Successfully checked 'ilo5_310.bin'.
Uploading component ilo5_310.bin.
The operation completed successfully.
Component ilo5_310.bin uploaded successfully.
Waiting for iLO UpdateService to finish processing the component
00 hour(s) 02 minute(s) 44 second(s)
Firmware has successfully been flashed.
iLO will reboot to complete flashing. Session will be terminated.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_set_ilo_to_dhcp_mode_via_ssh"><a class="anchor" href="#_set_ilo_to_dhcp_mode_via_ssh"></a>Set iLO to DHCP Mode via SSH</h3>
<div class="paragraph">
<p>Check if the DHCP Endpoint is enabled, in the case below, it&#8217;s not:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;/&gt;hpiLO-&gt; show /map1/dhcpendpt1

status=0
status_tag=COMMAND COMPLETED
Mon Feb  3 17:10:17 2025



/map1/dhcpendpt1
  Targets
  Properties
    EnabledState=no
    OtherTypeDescription=DHCP
  Verbs
    cd version exit show set</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set the <code>EnabledState=yes</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;/&gt;hpiLO-&gt; set /map1/dhcpendpt1 EnabledState=yes

status=0
status_tag=COMMAND COMPLETED
Mon Feb  3 17:11:30 2025

Network settings change applied.


Settings change applied, iLO will now be reset.
Logged Out: It may take several minutes before you can log back in.

CLI session stopped
Received disconnect from 10.254.0.201 port 22:11:  Client Disconnect
Disconnected from 10.254.0.201 port 22</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the iLO resets, make sure the new <em>IP Address Source</em> is "DHCP Address":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cdslmo402:~ # ipmitool lan print
Set in Progress         : Set Complete
Auth Type Support       : NONE MD5 PASSWORD
Auth Type Enable        : Callback : MD5 PASSWORD
                        : User     : MD5 PASSWORD
                        : Operator : MD5 PASSWORD
                        : Admin    : MD5 PASSWORD
                        : OEM      :
IP Address Source       : DHCP Address
IP Address              : 172.24.254.55
Subnet Mask             : 255.255.0.0
MAC Address             : b4:7a:f1:55:27:4a
SNMP Community String   :
BMC ARP Control         : ARP Responses Enabled, Gratuitous ARP Disabled
Default Gateway IP      : 172.24.255.254
802.1q VLAN ID          : Disabled
802.1q VLAN Priority    : 0
RMCP+ Cipher Suites     : 0,1,2,3
Cipher Suite Priv Max   : XuuaXXXXXXXXXXX
                        :     X=Cipher Suite Unused
                        :     c=CALLBACK
                        :     u=USER
                        :     o=OPERATOR
                        :     a=ADMIN
                        :     O=OEM
Bad Password Threshold  : Not Available</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updating_license"><a class="anchor" href="#_updating_license"></a>Updating License</h3>
<div class="paragraph">
<p>If you have an expired license:</p>
</div>
<div class="paragraph">
<p>Apply key under <code>Administration &gt; Licensing &gt; Activation Key &gt; Install</code>, or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh root@&lt;iLO address&gt; set /map1 license=/&lt;key&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reset_ilo"><a class="anchor" href="#_reset_ilo"></a>Reset iLO</h3>
<div class="paragraph">
<p>iLO 4: Navigate to <code>Information &#8594; Diagnostics &#8594; Reset</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/bmc-management/ilo4_reset.png" alt="reset iLO 4">
</div>
</div>
<div class="paragraph">
<p>iLO 5: Navigate to <code>Information &#8594; Diagnostics &#8594; Reset</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/bmc-management/ilo5_reset.png" alt="reset iLO 5">
</div>
</div>
<div class="paragraph">
<p>Or, using <code>ipmitool</code> from the host server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ipmitool mc reset cold</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_virtual_media_mount"><a class="anchor" href="#_virtual_media_mount"></a>Virtual Media Mount</h3>
<div class="paragraph">
<p>You can use iLO&#8217;s Virtual Media Mount to insert a virtual CD/DVD into the node using an HTTP URL to an <code>.iso</code> file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/bmc-management/ilo5_insert_virtual_media.png" alt="virtual media">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_bmc_information_from_host"><a class="anchor" href="#_find_bmc_information_from_host"></a>Find BMC Information from Host</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use <code>ipmitool lan print</code> from the host OS</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">[root@mawenzi-06 ~]# ipmitool lan print
Set in Progress         : Set Complete
Auth Type Support       : NONE MD5 PASSWORD
Auth Type Enable        : Callback : MD5 PASSWORD
                        : User     : MD5 PASSWORD
                        : Operator : MD5 PASSWORD
                        : Admin    : MD5 PASSWORD
                        : OEM      :
IP Address Source       : DHCP Address
IP Address              : 10.214.129.30
Subnet Mask             : 255.255.248.0
MAC Address             : 94:40:c9:47:b1:d7
SNMP Community String   :
BMC ARP Control         : ARP Responses Enabled, Gratuitous ARP Disabled
Default Gateway IP      : 10.214.128.1
802.1q VLAN ID          : Disabled
802.1q VLAN Priority    : 0
RMCP+ Cipher Suites     : 0,1,2,3
Cipher Suite Priv Max   : XuuaXXXXXXXXXXX
                        :     X=Cipher Suite Unused
                        :     c=CALLBACK
                        :     u=USER
                        :     o=OPERATOR
                        :     a=ADMIN
                        :     O=OEM
Bad Password Threshold  : Not Available</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ilo_redfish_api"><a class="anchor" href="#_ilo_redfish_api"></a>iLO Redfish API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://servermanagementportal.ext.hpe.com/docs/redfishservices/">HPE server management with Redfish</a>
<a href="https://servermanagementportal.ext.hpe.com/docs/examples/redfishexamples/">Redfish Examples</a></p>
</div>
<div class="paragraph">
<p>CURLing Redfish API for the iLO (iLO 5 in this example) looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl --insecure -u user:password --location https://&lt;iLO&gt;/redfish/v1/&lt;rest_of_redfish_url&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">curl example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">mawenzi-06:~ # curl --silent --insecure -u root:&lt;pass&gt; --location https://mawenzi-05-ipmi.hpc.amslabs.hpecorp.net/redfish/v1/Managers/1/VirtualMedia/2/ | jq
{
  "@odata.context": "/redfish/v1/$metadata#VirtualMedia.VirtualMedia",
  "@odata.etag": "W/\"14700DD6\"",
  "@odata.id": "/redfish/v1/Managers/1/VirtualMedia/2/",
  "@odata.type": "#VirtualMedia.v1_2_0.VirtualMedia",
  "Id": "2",
  "Actions": {
    "#VirtualMedia.EjectMedia": {
      "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/VirtualMedia.EjectMedia/"
    },
    "#VirtualMedia.InsertMedia": {
      "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/VirtualMedia.InsertMedia/"
    }
  },
  "ConnectedVia": "NotConnected",
  "Description": "Virtual Removable Media",
  "Image": "",
  "Inserted": false,
  "MediaTypes": [
    "CD",
    "DVD"
  ],
  "Name": "VirtualMedia",
  "Oem": {
    "Hpe": {
      "@odata.context": "/redfish/v1/$metadata#HpeiLOVirtualMedia.HpeiLOVirtualMedia",
      "@odata.type": "#HpeiLOVirtualMedia.v2_2_0.HpeiLOVirtualMedia",
      "Actions": {
        "#HpeiLOVirtualMedia.EjectVirtualMedia": {
          "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/Oem/Hpe/HpeiLOVirtualMedia.EjectVirtualMedia/"
        },
        "#HpeiLOVirtualMedia.InsertVirtualMedia": {
          "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/Oem/Hpe/HpeiLOVirtualMedia.InsertVirtualMedia/"
        }
      },
      "BootOnNextServerReset": false
    }
  },
  "WriteProtected": true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Insert virtual media in CD/DVD ROM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">mawenzi-06:~ # curl -i -X POST --insecure -u root:&lt;password&gt; --header "Content-Type: application/json" --data-raw '{"Image":"http://sp06.hpc.amslabs.hpecorp.net:8080/cm-admin-install-1.12-rocky94-x86_64.iso"}' --location https://mawenzi-05-ipmi.hpc.amslabs.hpecorp.net/redfish/v1/Managers/1/VirtualMedia/2/Actions/VirtualMedia.InsertMedia
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-type: application/json; charset=utf-8
Date: Tue, 07 Jan 2025 22:36:23 GMT
ETag: W/"02C2D1BB"
OData-Version: 4.0
Transfer-Encoding: chunked
X-Content-Type-Options: nosniff
X-Frame-Options: sameorigin
X-XSS-Protection: 1; mode=block

{"error":{"code":"iLO.0.10.ExtendedInfo","message":"See @Message.ExtendedInfo for more information.","@Message.ExtendedInfo":[{"MessageId":"Base.1.4.Success"}]}}

# Show it was inserted:
mawenzi-06:~ # curl --silent -X GET --insecure -u root:&lt;password&gt; --location https://mawenzi-05-ipmi.hpc.amslabs.hpecorp.net/redfish/v1/Managers/1/VirtualMedia/2/ | jq
{
  "@odata.context": "/redfish/v1/$metadata#VirtualMedia.VirtualMedia",
  "@odata.etag": "W/\"79D484A5\"",
  "@odata.id": "/redfish/v1/Managers/1/VirtualMedia/2/",
  "@odata.type": "#VirtualMedia.v1_2_0.VirtualMedia",
  "Id": "2",
  "Actions": {
    "#VirtualMedia.EjectMedia": {
      "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/VirtualMedia.EjectMedia/"
    },
    "#VirtualMedia.InsertMedia": {
      "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/VirtualMedia.InsertMedia/"
    }
  },
  "ConnectedVia": "URI",
  "Description": "Virtual Removable Media",
  "Image": "http://sp06.hpc.amslabs.hpecorp.net:8080/cm-admin-install-1.12-rocky94-x86_64.iso",
  "ImageName": "cm-admin-install-1.12-rocky94-x86_64.iso",
  "Inserted": true,
  "MediaTypes": [
    "CD",
    "DVD"
  ],
  "Name": "VirtualMedia",
  "Oem": {
    "Hpe": {
      "@odata.context": "/redfish/v1/$metadata#HpeiLOVirtualMedia.HpeiLOVirtualMedia",
      "@odata.type": "#HpeiLOVirtualMedia.v2_2_0.HpeiLOVirtualMedia",
      "Actions": {
        "#HpeiLOVirtualMedia.EjectVirtualMedia": {
          "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/Oem/Hpe/HpeiLOVirtualMedia.EjectVirtualMedia/"
        },
        "#HpeiLOVirtualMedia.InsertVirtualMedia": {
          "target": "/redfish/v1/Managers/1/VirtualMedia/2/Actions/Oem/Hpe/HpeiLOVirtualMedia.InsertVirtualMedia/"
        }
      },
      "BootOnNextServerReset": false
    }
  },
  "WriteProtected": true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set 'BootOnNextServerReset' to True for VirtualMedia:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">curl -i -X PATCH --insecure -u root:&lt;password&gt; --header "Content-Type: application/json" --data-raw '{"Oem":{"Hpe":{"BootOnNextServerReset": true}}}' --location https://mawenzi-05-ipmi.hpc.amslabs.hpecorp.net/redfish/v1/Managers/1/VirtualMedia/2/
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-type: application/json; charset=utf-8
Date: Tue, 07 Jan 2025 22:41:18 GMT
ETag: W/"02C2D1BB"
OData-Version: 4.0
Transfer-Encoding: chunked
X-Content-Type-Options: nosniff
X-Frame-Options: sameorigin
X-XSS-Protection: 1; mode=block

{"error":{"code":"iLO.0.10.ExtendedInfo","message":"See @Message.ExtendedInfo for more information.","@Message.ExtendedInfo":[{"MessageId":"Base.1.4.Success"}]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Eject virtual media:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">mawenzi-06:~ # curl -i -X POST --header "Content-Type: application/json" --data-raw '{}' --insecure -u root:&lt;password&gt; --location https://mawenzi-05-ipmi.hpc.amslabs.hpecorp.net/redfish/v1/Managers/1/VirtualMedia/2/Actions/VirtualMedia.EjectMedia/
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-type: application/json; charset=utf-8
Date: Tue, 07 Jan 2025 22:34:53 GMT
ETag: W/"02C2D1BB"
OData-Version: 4.0
Transfer-Encoding: chunked
X-Content-Type-Options: nosniff
X-Frame-Options: sameorigin
X-XSS-Protection: 1; mode=block

{"error":{"code":"iLO.0.10.ExtendedInfo","message":"See @Message.ExtendedInfo for more information.","@Message.ExtendedInfo":[{"MessageId":"Base.1.4.Success"}]}}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ipmitool_guide"><a class="anchor" href="#_ipmitool_guide"></a>ipmitool Guide</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>Install <code>ipmitool</code> on a Linux server somewhere on the same network as the BMC you&#8217;re trying to control</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">zypper install ipmitool</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_serial_over_lan_console"><a class="anchor" href="#_serial_over_lan_console"></a>Serial over LAN Console</h3>
<div class="ulist">
<ul>
<li>
<p>Activate a Serial Over LAN (SOL) console:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ipmitool -H &lt;bmc_ip_address&gt; -v -I lanplus -U &lt;user&gt; -P &lt;password&gt; sol activate</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chassis_commands"><a class="anchor" href="#_chassis_commands"></a>Chassis Commands</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Chassis Commands:
  status, power, policy, restart_cause
  poh, identify, selftest,
  bootdev, bootparam, bootmbox</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Show chassis status</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">mawenzi-06:~ # ipmitool -H 10.214.130.217 -v -I lanplus -U root -P &lt;password&gt; chassis status
Loading IANA PEN Registry...
Using best available cipher suite 3

Running Get VSO Capabilities my_addr 0x20, transit 0, target 0x20
Invalid completion code received: Invalid command
Discovered IPMB address 0x0
System Power         : on
Power Overload       : false
Power Interlock      : inactive
Main Power Fault     : false
Power Control Fault  : false
Power Restore Policy : previous
Last Power Event     :
Chassis Intrusion    : inactive
Front-Panel Lockout  : inactive
Drive Fault          : false
Cooling/Fan Fault    : false
Front Panel Control  : none</code></pre>
</div>
</div>
</li>
<li>
<p>Set boot device to virtual CD:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ipmitool -H &lt;bmc_ip_address&gt; -v -I lanplus -U &lt;user&gt; -P &lt;password&gt; chassis bootdev cdrom</code></pre>
</div>
</div>
</li>
<li>
<p>Chassis power commands:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ipmitool -H &lt;bmc_ip_address&gt; -v -I lanplus -U &lt;user&gt; -P &lt;password&gt; chassis power off
ipmitool -H &lt;bmc_ip_address&gt; -v -I lanplus -U &lt;user&gt; -P &lt;password&gt; chassis power on
ipmitool -H &lt;bmc_ip_address&gt; -v -I lanplus -U &lt;user&gt; -P &lt;password&gt; chassis power cycle

# Shut down host gracefully
ipmitool -H &lt;bmc_ip_address&gt; -v -I lanplus -U &lt;user&gt; -P &lt;password&gt; chassis power soft</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright © 2023-2025 Caleb Carlson. All rights reserved.
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
